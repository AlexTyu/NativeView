function updateGyro(e){io.sockets.emit("sendGyro",{gyro:e}),console.log(e)}function onConnection(e){console.log("CONNCECTED"),e.emit("sendGyro",{gyro:gyroscope})}var express=require("express"),http=require("http"),path=require("path"),fs=require("fs"),pug=require("pug"),app=require("express")(),io=require("socket.io").listen(server),server=app.listen(4444,function(){console.log("Express server listening on port %d in %s mode",app.get("port"),app.settings.env)}),gyroscope={active:!1,data:null};if(gyroscope.active){var SerialPort=require("serialport"),serialport=new SerialPort("/dev/cu.usbmodem1431",{baudRate:57600,parser:SerialPort.parsers.readline("\n")});serialport.on("open",function(){console.log("Serial Port Opend"),serialport.on("data",function(e){gyroscope.data=e,updateGyro(gyroscope)})})}else updateGyro(gyroscope);io.sockets.on("connection",onConnection),app.use(express.static("static")),app.set("views","src/views"),app.set("view engine","pug"),app.get("/",function(e,o){o.render("index.pug",{})});